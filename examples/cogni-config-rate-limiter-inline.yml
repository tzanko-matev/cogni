version: 1
repo:
  output_dir: "./out"
  setup_commands:
    - "go mod download"

agents:
  - id: default
    type: builtin
    provider: "openrouter"
    model: "model"
    max_steps: 25
    temperature: 0.0

default_agent: "default"

rate_limiter:
  mode: "embedded"
  limits:
    - definition:
        key: "global:llm:openrouter:model:rpm"
        kind: "rolling"
        capacity: 600
        window_seconds: 60
        unit: "requests"
        description: "example rpm"
        overage: "debt"
      status: "active"
      pending_decrease_to: 0
    - definition:
        key: "global:llm:openrouter:model:tpm"
        kind: "rolling"
        capacity: 50000
        window_seconds: 60
        unit: "tokens"
        description: "example tpm"
        overage: "debt"
      status: "active"
      pending_decrease_to: 0
    - definition:
        key: "global:llm:openrouter:model:concurrency"
        kind: "concurrency"
        capacity: 2
        timeout_seconds: 1
        unit: "requests"
        description: "example concurrency"
        overage: "debt"
      status: "active"
      pending_decrease_to: 0
  workers: 2
  request_timeout_ms: 2000
  max_output_tokens: 2048
  batch:
    size: 64
    flush_ms: 2

tasks:
  - id: question_eval_example
    type: question_eval
    agent: "default"
    questions_file: "spec/questions/example.yml"
    concurrency: 2
    budget:
      max_tokens: 12000
      max_seconds: 120
